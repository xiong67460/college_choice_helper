<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>添加大学</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <main>
    <h1>添加大学</h1>
    <form id="add-univ-form">
      <input type="text" name="name" placeholder="大学名称" required><br>
      <input type="text" name="location" placeholder="地区" required><br>
      <input type="text" name="type" placeholder="类型" required><br>
      <input type="text" name="website" placeholder="官网链接"><br>
      <input type="text" name="image" placeholder="图片路径（如 image/xxx.png）"><br>
      <input type="text" name="features" placeholder="特色"><br>
      <input type="text" name="advantage_major" placeholder="优势专业（如 计算机、医学等）"><br>
      <input type="text" name="score_years" placeholder="分数年份（如 2019,2020,2021,2022,2023）"><br>
      <input type="text" name="score_trend" placeholder="分数线（如 600,610,620,630,640）"><br>
      <button type="submit">提交</button>
    </form>
    <div id="result"></div>
  </main>
  <footer>
    <p>&copy; 2025 大学填报辅助工具</p>
  </footer>
  <script>
    document.getElementById('add-univ-form').onsubmit = async function(e) {
      e.preventDefault();
      const form = e.target;
      const data = {
        name: form.name.value,
        location: form.location.value,
        type: form.type.value,
        website: form.website.value,
        image: form.image.value,
        features: form.features.value,
        advantage_major: form.advantage_major.value,
        score_years: form.score_years.value.split(',').map(s=>parseInt(s.trim())),
        score_trend: form.score_trend.value.split(',').map(s=>parseInt(s.trim()))
      };
      const res = await fetch('/api/universities', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });
      const result = await res.json();
      document.getElementById('result').innerText = result.message || result.error;
      if (result.id) form.reset();
    }
  </script>
</body>
</html> 